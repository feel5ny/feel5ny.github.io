---
title: ì½”ë“œìŠ¤í”¼ì¸ 77 ES6_4íšŒì°¨_Abstract loop & lazy execution
date: '2019-02-03'
description: "\U0001F315\U0001F311\U0001F311 TL;DR ë³µìŠµí• ë•Œë‚˜ ì´ ë¬¸ì œê°€ ê¹Œë¨¹ì—ˆì„ ì¦ˆìŒì— í’€ì–´ë³´ê¸° 1. iterableê°ì²´ ì™„ì„±í•˜ê¸° ??? êµ¬í•´ë³´ê¸° (2ê°€ì§€ ë°©ë²•ìœ¼ë¡œ) ``js {   [Symbol.iterator](){return this;}   data: [{a:[1,2,3,4], b:'-'}..."
author: Joy Kim
tags:
  - javaScript
  - yield
  - generator
  - loop
categories:
  - 01_Web
  - zz. Workshop
enableComment: true
},
    {
      "title": {
        "name": "2. lazy execution",
        "id": "2"
      },
      "depth1": [
        {
          "name": "2.1 yield",
          "id": "2-1"
        },
        {
          "name": "2.2 yield*",
          "id": "2-2"
        }
      ]
    }
  ]
thumbnail: /images/2019/10/thumb_default.jpg
---

ğŸŒ•ğŸŒ‘ğŸŒ‘

### TL;DR

ë³µìŠµí• ë•Œë‚˜ ì´ ë¬¸ì œê°€ ê¹Œë¨¹ì—ˆì„ ì¦ˆìŒì— í’€ì–´ë³´ê¸°

1. iterableê°ì²´ ì™„ì„±í•˜ê¸° `???` êµ¬í•´ë³´ê¸° (2ê°€ì§€ ë°©ë²•ìœ¼ë¡œ)

```js
{
  [Symbol.iterator](){return this;}
  data: [{a:[1,2,3,4], b:'-'}, [5,6,7], 8, 9],
  next(){
    return ???
  }
}
```

> ì½”ë“œìŠ¤í”¼ì¸  ê°•ì˜ ì •ë¦¬ë¡ì…ë‹ˆë‹¤.

---

### 4ê°• í‚¤ì›Œë“œ: Generatorì˜ ì§€ì—°ì‹¤í–‰ ì¸¡ë©´ê³¼ ì´ë¥¼ ìœ„í•œ ì¶”ìƒë£¨í”„í™”

---


## 1. abstract loop: ë£¨í”„ì˜ ì¶”ìƒí™”

### 1.1 complex recursion ë³µì¡í•œ ë°˜ë³µ ë‹¨ìˆœí•œ ë°°ì—´ ë£¨í”„ì¸ ê²½ìš° ê°„ë‹¨íˆ ì´í„°ë ˆì´ì…˜ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```js
{
  [Symbol.iterator](){return this;},
  data:[1,2,3,4],
  next(){
     return {
       done:this.data.length == 0,
       value:this.data.shift()
    };
  }
}
```

#### ë³µì¡í•œ ë‹¤ì¸µí˜• ê·¸ë˜í”„ëŠ” ì–´ë–»ê²Œ ì´í„°ë ˆì´ì…˜ í•  ê²ƒì¸ê°€?

es6ì™€ es6ì´ì „ì˜ ê°ì²´ ë¦¬í„°ëŸ´ì˜ í° ì°¨ì´ì ì´ ë¬´ì—‡ì¸ê°€

1. es6ì´ì „

- ê¸°ì¡´ì˜ ê°ì²´ ë¦¬í„°ëŸ´ì—ì„œëŠ” ê°ì²´ ë¦¬í„°ëŸ´ì˜ ìˆœì„œê°€ ì—†ë‹¤.
- ìë°”ë¡œ ë”°ì§€ë©´ hash memoryë¡œ ë˜ì–´ìˆë‹¤.

2. es6

- es6ì˜ ê°ì²´ ë¦¬í„°ëŸ´ì€ì—ì„œëŠ” ê°ì²´ ë¦¬í„°ëŸ´ì˜ ìˆœì„œê°€ ìˆë‹¤.
- **linked hash memory**ë¡œ ë˜ì–´ìˆë‹¤.
- ë°˜ë“œì‹œ ìˆœì„œëŒ€ë¡œ í•´ì„ëœë‹¤.

#### ë¬¸ì œ

```js
{
  [Symbol.iterator](){return this;}
  data: [{a:[1,2,3,4], b:'-'}, [5,6,7], 8, 9],
  next(){
    return ???
  }
}
```

##### ìƒê°í•´ë³´ê¸° (ê¸€ì“´ì´ ìƒê°..)

1. iterable í”„ë¡œí† ì½œ ìœ ì§€í•˜ê¸°
2. ë°°ì—´ ìš”ì†Œë“¤ì˜ íƒ€ì… ê²€ì‚¬
3. ê°ì²´ì¼ ê²½ìš° ê°ì²´ ë‚´ë¶€ í‚¤ê°’ì˜ ìš”ì†Œë“¤ì˜ íƒ€ì… ê²€ì‚¬
   1. ê°ì²´ì¼ ê²½ìš°
   2. ë°°ì—´ì¼ ê²½ìš°
   3. ì¼ë°˜ ê°’ì¸ ê²½ìš° => ì²˜ìŒ íƒ€ì… ê²€ì‚¬ì™€ ê°™ì€ íë¦„ì´ë¯€ë¡œ í•´ë‹¹ flowë¥¼ recursive ë˜ë„ë¡ í•œë‹¤.
   - ì–´ë–»ê²Œ ê°™ì€ ë£¨í”„ë¥¼ ë‹¤ì‹œ íƒœìš°ì§€..
4. ë°°ì—´ì¼ ê²½ìš° ë°°ì—´ ìš”ì†Œì˜ íƒ€ì… ê²€ì‚¬
   1. ê°ì²´ì¼ ê²½ìš°
   2. ë°°ì—´ì¼ ê²½ìš°
   3. ì¼ë°˜ ê°’ì¸ ê²½ìš° => ì²˜ìŒ íƒ€ì… ê²€ì‚¬ì™€ ê°™ì€ íë¦„ì´ë¯€ë¡œ í•´ë‹¹ flowë¥¼ recursive ë˜ë„ë¡ í•œë‹¤.
   - ì–´ë–»ê²Œ ê°™ì€ ë£¨í”„ë¥¼ ë‹¤ì‹œ íƒœìš°ì§€..
5. ì¼ë°˜ ê°’ì¸ ê²½ìš° ê°’ ë°˜í™˜

---

##### cf\_\_1. ë£¨í”„ë¥¼ ì–´ë–»ê²Œí•˜ë©´ ì˜ ì§¤ ìˆ˜ ìˆì„ê¹Œ.

ë£¨í”„ë¥¼ ì˜ ì§œê³  ë³´ë‹¤ ì–´ë ¤ìš´ ë¡œì§ì„ ì§œëŠ” ë°©ë²•ì€ **ë‚´ ë¨¸ë¦¬ê°€ ì„ ì–¸í•œ ë³€ìˆ˜ë§Œí¼ì„ ì¶”ì í•  ìˆ˜ ìˆì–´ì•¼
í•œë‹¤...**

ê¸°ë³¸ì ì¸ ì•Œê³ ë¦¬ì¦˜ ì „ëµì€ ìµœëŒ€í•œ ìƒíƒœë¥¼ ëœì“°ëŠ”ê²ƒ. ë‚´ ë¨¸ë¦¬ê°€ ì¶”ì í•  ì •ë„ë¡œ..

---

#### ì •ë‹µ

ê°ê°ì´ ì»¨í…Œì´ë„ˆ í˜•ì´ë¼ë©´ ê·¸ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ í•´ì²´í•´ì„œ ë‹¤ì‹œ ë°°ì—´ì— ë¶™ì—¬ì¤€ë‹¤. ë” ì´ìƒ ì»¨í…Œì´ë„ˆ í˜•ì´
ì•„ë‹ ë•Œê¹Œì§€

```js
// í”„ë¡œí† ì½œë§Œ ë§ì¶°ì£¼ë©´ ëœë‹¤.
// {
//   done: boolean,
//   value: ì¶œë ¥ê°’..
// }
{
  [Symbol.iterator](){return this;}
  data: [{a:[1,2,3,4], b:'-'}, [5,6,7], 8, 9],
  next(){
    let v;
    while(v = this.data.shift()) {
      // shiftê°€ ë”ì´ìƒ ì•ˆë˜ë©´ undefined
      switch(true){
        case Array.isArray(v):
          // 2ë²ˆì§¸ ì¼€ì´ìŠ¤ë¬¸ì˜ ê°ì²´ íƒ€ì…ê°€ë“œ ì¡°ê±´ë¬¸ì´ array íƒ€ì…ë„ í¬í•¨ë˜ë¯€ë¡œ, arrayë§Œì„ ìœ„í•œ ì¡°ê±°ë¬¸ì„ ë¨¼ì € ì‘ì„±í•œë‹¤.
          this.data.unshift(...v);
          break;
        case v && typeof v === 'object':
          for(var k in v) this.data.unshift(...x);
          break;
        default:
          return {value:v, done: false}
      }
      return {done: true}
    }
  }
}
```

##### ì •ë‹µ ë‚´ì˜ ì˜¤ë¥˜

`for(var k in v)`

1.  for...inë¬¸ì€ **prototypeì˜ keyê¹Œì§€ ë‹¤ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì—** `hasOwnProperty`ë¥¼ ì¡°ê±´ì— ì¶”ê°€í•´ì•¼í•œë‹¤.

- hasOwnPropertyëŠ” ìì‹ ì˜ ê³ ìœ  ì†ì„±, ì¦‰ ìƒì†ë°›ì€ í”„ë¡œí¼í‹°ê°€ ì•„ë‹Œ ìˆœìˆ˜ ìì‹ ì˜ ì†ì„±ì¸ ê²½ìš°ì—ë§Œ
  trueë¼ëŠ” ê°’ì„ ë°˜í™˜í•˜ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.

```js
for (var k in v) {
  if (v.hasOwnProperty(k)) this.data.unshift(...x);
}
```

2. í˜„ì¬ ìƒíƒœì—ì„œëŠ” ìˆœì„œ ë³´ì¥ì´ ì•ˆëœë‹¤.

```js
let x = [];
for (var k in v) x.push(v[k]);
this.data.unshift(...x);
```

---

##### í•œë²ˆë” ë¦¬íŒ©í† ë§

ê°’ì¸ íƒ€ì…ì„ `v instanceof Object`ë¡œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤!

```js
{
  [Symbol.iterator](){return this;}
  data: [{a:[1,2,3,4], b:'-'}, [5,6,7], 8, 9],
  next(){
    let v;
    while(v = this.data.shift()) {
      if(!(v instanceof Object)) return {value: v};
      if(!Array.isArray(v)) v = Object.values(v);
      this.data.unshift(...v);
    }
    return {done: true}
  }
}
```

---

#### ì •ë¦¬

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ëŠ” 2ê°€ì§€ë¡œ ë˜ì–´ìˆë‹¤.

1. ì–¸ì–´ìì²´ì˜ ë¬¸ë²•ì ì¸ ë‚´ìš©,
2. í´ë˜ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í´ë˜ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” **ì½”ì–´ê°ì²´** (Built-in) Math, Date, RegEx...
   => í‘œì¤€ìœ¼ë¡œ ì œê³µë˜ê³  ìˆëŠ” ì–¸ì–´ í‘œì¤€ì˜ ì¼ë¶€ => ì–¸ì–´ ìŠ¤íŒ©ì˜ ì¼ë¶€

**ì½”ì–´ê°ì²´ì— ìˆëŠ” ë©”ì„œë“œë“¤ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¸°ë³¸ ì–¸ì–´ìì²´ì˜ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ì•ˆì „í•˜ë‹¤.** ex.
for..inë³´ë‹¤ Object.values

> **ì¬ì‚¬ìš©ì„± ì˜¬ë¦¬ê¸°** `unshift`ë‚˜ `shift`ë¡œ ì¸í•´ì„œ dataì˜ ë°°ì—´ì´ ë¹ˆë°°ì—´ì´ ë˜ëŠ” ìƒí™©ì´ ëœë‹¤. í´ë˜ìŠ¤ë¡œ
> ë¬¶ì–´ì„œ ë§¤ë²ˆ ë¶€ë¥¼ë•Œë§ˆë‹¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” í˜•íƒœë¡œ ë§Œë“¤ì.

##### cf\_\_2. í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— í• ë‹¹í•˜ì.

í•¨ìˆ˜ë¥¼ ì •ì˜í• ë•Œ 3ê°€ì§€ ìŠ¤íƒ€ì¼

1. í•¨ìˆ˜ í‘œí˜„ì‹
2. í•¨ìˆ˜ ì„ ì–¸ë¬¸
3. Function...

í•¨ìˆ˜ëŠ” ê°’ì´ê¸° ë•Œë¬¸ì— ë³€ìˆ˜ì— í• ë‹¹í•˜ëŠ” í˜•ì‹ì´ ë§ë‹¤. ë” ì •í™•í•˜ê²Œ í˜¸ì´ìŠ¤íŒ…ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì–´ëŠ ì‹œì ì—
í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤ë¥¼ ëª…í™•í•˜ê²Œ ì½”ë“œë¡œ ì¸ì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— functionìœ¼ë¡œ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ ì •ì˜ë°©ë²•ì€ ì•„ì˜ˆ
ê¸ˆì§€ì‹œí‚¤ê³  ëª»ì“°ê²Œ í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. lintì—ë„ í•¨ìˆ˜ì„ ì–¸ë¬¸ ê¸ˆì§€ë£°ì´ ìˆë‹¤.

í´ë˜ìŠ¤ë„ í•˜ë‚˜ì˜ ê°’ì´ë‹¤. ë³€ìˆ˜ì— í• ë‹¹ì´ ëœë‹¤. ë³€ìˆ˜ì˜ í• ë‹¹ ì—†ì´ class..ë¡œ ì‹œì‘í•˜ëŠ” ì„ ì–¸ë°©ë²•ì€ ì´
í´ë˜ìŠ¤ê°€ ì–¸ì œ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€ ëª¨í˜¸í•˜ê²Œ ë§Œë“œëŠ” ê´€ì ì´ ìˆë‹¤.

```js
const Compx = class {
  constructor(data) {
    this.data = data;
  }
  [Symbol.iterator]() {
    const data = JSON.parse(JSON.stringify(this.data));
    // ì™„ì „í•œ ë³µì‚¬. ê°€ì¥ë¹¨ë¦¬ ë³µì‚¬í•˜ëŠ” ë°©ë²•..
    return {
      next() {
        let v;
        while ((v = data.shift())) {
          if (!(v instanceof Object)) return { value: v };
          if (!Array.isArray(v)) v = Object.values(v);
          data.unshift(...v);
        }
        return { done: true };
      },
    };
  }
};

const a = new Compx([{ a: [1, 2, 3, 4], b: '-' }, [5, 6, 7], 8, 9]);
console.log([...a]);
console.log([...a]);
```

shiftë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ dataê°€ ë°°ì—´ì´ ì™€ì•¼í•˜ëŠ” ì¡°ê±´ì´ ìˆê¸° ë•Œë¬¸ì— dataì˜ ì‚¬ë³¸ì„ ë§Œë“¤ë•Œ ì•„ì˜ˆ
ë°°ì—´í™”ì‹œí‚¨ë‹¤. `const data = [JSON.parse(JSON.stringify(this.data));]`

ifì ˆì„ ë³´ë©´ mandatoryê°€ ì•„ë‹Œ optional.

```js
const Compx = class {
  constructor(data) {
    this.data = data;
  }
  *gene() {
    const data = [JSON.parse(JSON.stringify(this.data))];
    let v;
    while ((v = data.shift())) {
      if (!(v instanceof Object)) yield v;
      else {
        if (!Array.isArray(v)) v = Object.values(v);
        data.unshift(...v);
      }
    }
  }
};
const a = new Compx([{ a: [1, 2, 3, 4], b: '-' }, [5, 6, 7], 8, 9]);
console.log([...a]);
console.log([...a]);
```

---

---


### 1.2 abstract loop ìœ„ì˜ ë£¨í”„ëŠ” ëª©ì ì´ ìˆëŠ” ë£¨í”„ì´ë‹¤. ëª©ì ì´ ìˆëŠ” ë£¨í”„ë¥¼ ë§Œë“¤ê³  ëª©ì ì„ ë°”ê¾¸ë©´
ë£¨í”„ë¥¼ ë‹¤ì‹œ ì§œì•¼í•œë‹¤.

#### ë‹¤ì–‘í•œ êµ¬ì¡°ì˜ ë£¨í”„ì™€ ë¬´ê´€í•˜ê²Œ í•´ë‹¹ ê°’ì´ë‚˜ ìƒí™©ì˜ ê°œì…ë§Œ í•˜ê³  ì‹¶ì€ ê²½ìš°

```js
(data, f) => {
  let v;
  while ((v = data.shift())) {
    if (!(v instanceof Object)) {
      // vë¡œ ë­”ê°€ í•˜ëŠ” ë¶€ë¶„
      f(v);
    } else {
      if (!Array.isArray(v)) v = Object.values(v);
      data.unshift(...v);
    }
  }
};
```

ì´ ìƒí™©ì—ì„œ f(v)ë¥¼ í˜¸ì¶œí•˜ëŠ” bodyì— ë³¸ë˜ ëª©ì ê³¼ ë‹¤ë¥¸ ë¡œì§ì´ ì¶”ê°€ ë  ê²½ìš°, ê°™ì€ ë¡œì§ì„ ë³µì‚¬í•˜ê³  ì›í•˜ëŠ”
ë¡œì§ì„ ì¶”ê°€í•´ì•¼í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•œë‹¤. ë¬¸ìœ¼ë¡œ ë¡œì§ì„ ì‘ì„±í•  ë•ŒëŠ” ë³„ë‹¤ë¥¸ ë°©ë²•ì´ ì—†ë‹¤. **=> ì œì–´ë¬¸ì„
ì¬í™œìš©í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì¤‘ë³µì •ì˜í•  ìˆ˜ ë°–ì— ì—†ë‹¤.** => ë¬¸ì€ ì‚¬ìš©í•˜ê³  ë‚˜ë©´ ì¬í™œìš©í•  ìˆ˜ ì—†ëŠ”ë° ì´ê±¸ ì–´ë–»ê²Œ
ê°ì²´í™”í•˜ì§€?

#### ê²°êµ­ ì œì–´ë¬¸ì„ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ì—†ê³  êµ¬ì¡°ê°ì²´ë¥¼ ì´ìš©í•´ ë£¨í”„ ì‹¤í–‰ê¸°ë¥¼ ë³„ë„ë¡œ êµ¬í˜„

êµ¬ì¡°ë¥¼ ì¶”ìƒí™”í•´ë³´ì.

- ë£¨í”„ ê³µí†µ ê³¨ê²©
- ê°œë³„êµ¬ì¡°ê°ì²´

##### cf\_\_3. ifë¬¸ì„ ì œê±°í•˜ëŠ” ë°©ë²•

ìš°ë¦¬ê°€ ë°°ìš°ëŠ” ê±°ì˜ ëª¨ë“  priority ê¸°ë²•ì€ ifë¥¼ ì–´ë–»ê²Œí•˜ë©´ ì œê±°í• ê¹Œì— ëŒ€í•œ ì—°êµ¬ì¼ ìˆ˜ë„ ìˆë‹¤. ì‚¬ëŒì€
ifê°€ ë§ì•„ì§€ë©´ ê°ë‹¹ì´ ì•ˆëœë‹¤. ì¡°ê±´ì´ ë§ì•„ì ¸ì„œ.. ifë¥¼ ì–´ë–»ê²Œí•˜ë©´ ì œê±°í•  ìˆ˜ ìˆì„ê¹Œ?

- ì •ë‹¨í•œ ì´ìœ ë¼ë©´ ë°”ë¡œ ì œê±°í•  ìˆ˜ ì—†ë‹¤. í•„ìš”ì— ì˜í•´ì„œ íƒœì–´ë‚¬ê¸° ë•Œë¬¸ì—
- ifë¡œ ë‚˜ëˆ ì§€ëŠ” ê²½ìš°ì˜ ìˆ˜ë§Œí¼ì˜ ê°’ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë†“ê³ , ë°”ê¹¥ìª½ì—ì„œ ê·¸ ê°’ì„ ì„ íƒí•´ì„œ ë“¤ì–´ì˜¤ê²Œ í•˜ëŠ”
  ìˆ˜ë°–ì— ì—†ë‹¤.

ì•„ë˜ëŠ” ifê°€ 3ê°œì´ë‹¤.

1. arrayì¼ë•Œ
2. objectì¼ë•Œ
3. primitiveì¼ë•Œ 3ê°œë§Œí¼ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ë†“ê³  ë°”ê¹¥ìª½ì—ì„œ ê°ì²´ë¥¼ ê²°ì •í•˜ê²Œ ë” ë§Œë“¤ì–´ ì£¼ë©´ ê°’ìœ¼ë¡œ ë¶„ë¦¬í• 
   ìˆ˜ ìˆê²Œ ëœë‹¤. => ì´ë ‡ê²Œ ifë¬¸ì´ í•˜ë‚˜ì”© ì œê±°ëœë‹¤.

```js
(data, f) => {
  let v;
  while ((v = data.shift())) {
    if (!(v instanceof Object)) {
      f(v);
    } else {
      if (!Array.isArray(v)) v = Object.values(v);
      data.unshift(...v);
    }
  }
};
```

<img src="/images/2019/10/01.png" />

#### íŒ©í† ë¦¬ + ì»´í¬ì§€íŠ¸

- ì„ íƒê¸°ëŠ” íŒ©í† ë¦¬ íŒ¨í„´ìœ¼ë¡œ
- ê°ê°ì˜ ì¡°ê±´ë¬¸ì„ ì»´í¬ì§€íŠ¸ íŒ¨í„´ìœ¼ë¡œ

##### cf\_\_4. íŒ©í† ë¦¬ íŒ¨í„´ [ì°¸ê³ ](https://joshua1988.github.io/web-development/javaScript/javaScript-pattern-design/#%ED%8C%A9%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4)

- ë¹„ìŠ·í•œ ê°ì²´ë¥¼ ê³µì¥ì—ì„œ ì°ì–´ë‚´ë“¯ì´ ë°˜ë³µì ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” íŒ¨í„´
- ì»´íŒŒì¼ ì‹œì ì— êµ¬ì²´ì ì¸ íƒ€ì…(í´ë˜ìŠ¤)ì„ ëª°ë¼ë„ ê°ì²´ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤
- íŒ©í† ë¦¬ íŒ¨í„´ì˜ ê°€ì¥ í”í•œ ì‚¬ë¡€ëŠ” Object() ë¥¼ ì´ìš©í•œ ê°ì²´ ìƒì„±ì‹œ, ì£¼ì–´ì§€ëŠ” ê°’ì˜ íƒ€ì…ì— ë”°ë¼ String,
  Boolean, Number ë“±ìœ¼ë¡œ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ê²ƒì´ë‹¤.

##### cf\_\_5. composite íŒ¨í„´

```js
// ğŸ˜µğŸ˜µğŸ˜µ
const Operator = class {
  static factory(v) {
    if (v instanceof Object) {
      if (!Array.isArray(v)) v = Object.values(v);
      // --- objectë„ ë°°ì—´ë¡œ í™˜ì›ì‹œì¼°ê¸° ë•Œë¬¸ì— í˜„ì¬ vëŠ” ë°°ì—´ì„.
      return new ArrayOp(v.map(v => Operator.factory(v)));
    } else return new PrimaOp(v);
  }
  constructor(v) {
    this.v = v;
  }
  operation(f) {
    throw 'override';
  }
};

// primitive íƒ€ì… ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤
const PrimaOp = class extends Operator {
  constructor(v) {
    super(v);
  }
  operation(f) {
    f(this.v);
  }
};

// ë°°ì—´ íƒ€ì…ì„ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤
const ArrayOp = class extends Operator {
  constructor(v) {
    super(v);
  }
  operation(f) {
    for (const v of this.v) v.operation(f);
  }
};

Operator.factory([1, 2, 3, { a: 4, b: 5 }, 6, 7]).operation(console.log);
```

- ì¼€ì´ìŠ¤ë¥¼ ë” ë§ì´ ëŠ˜ë¦¬ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤..


## 2. lazy execution

### yield

### yield*
