<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>13/ Image 업로드 시 회전에 대하여 (feat. exif 메타데이터 - Orientation) | 필오의 개발일지</title>
    
    <meta name="theme-color" content="#26d0ce">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="javascript,File API,EXIF" />
    
    
    <meta name="description" content="웹 브라우저에서 이미지를 업로드 할 때 type이 file인 input을 통해 이미지를 받고, file API를 사용하여 이미지를 read합니다. 이때 핸드폰을 세워서 촬영할 경우 사진 이미지가 멋대로 회전되서 read될때가 있습니다. 이를 잡기 위해서는 사진의 메타정보(exif)에 있는 orientation이라는 정보를 확인해야합니다.exif가 무엇인지">
<meta name="keywords" content="javascript,File API,EXIF">
<meta property="og:type" content="article">
<meta property="og:title" content="13&#x2F; Image 업로드 시 회전에 대하여 (feat. exif 메타데이터 - Orientation)">
<meta property="og:url" content="http://feel5ny.github.io/2018/08/06/JS_13/index.html">
<meta property="og:site_name" content="필오의 개발일지">
<meta property="og:description" content="웹 브라우저에서 이미지를 업로드 할 때 type이 file인 input을 통해 이미지를 받고, file API를 사용하여 이미지를 read합니다. 이때 핸드폰을 세워서 촬영할 경우 사진 이미지가 멋대로 회전되서 read될때가 있습니다. 이를 잡기 위해서는 사진의 메타정보(exif)에 있는 orientation이라는 정보를 확인해야합니다.exif가 무엇인지">
<meta property="og:locale" content="korea">
<meta property="og:image" content="http://feel5ny.github.io/images/2018/22/thumb_default.jpg">
<meta property="og:updated_time" content="2018-08-09T11:48:34.726Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="13&#x2F; Image 업로드 시 회전에 대하여 (feat. exif 메타데이터 - Orientation)">
<meta name="twitter:description" content="웹 브라우저에서 이미지를 업로드 할 때 type이 file인 input을 통해 이미지를 받고, file API를 사용하여 이미지를 read합니다. 이때 핸드폰을 세워서 촬영할 경우 사진 이미지가 멋대로 회전되서 read될때가 있습니다. 이를 잡기 위해서는 사진의 메타정보(exif)에 있는 orientation이라는 정보를 확인해야합니다.exif가 무엇인지">
<meta name="twitter:image" content="http://feel5ny.github.io/images/2018/22/thumb_default.jpg">
<meta property="fb:admins" content="166480990612572">
    
    
    <link rel="canonical" href="http://feel5ny.github.io/2018/08/06/JS_13/"/>
    
        <link rel="alternate" href="/feed.xml" title="필오의 개발일지" type="application/atom+xml" />
    

    
        <link rel="icon" href="/images/favicon.png" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">
    
    <link rel="stylesheet" href="/css/style.css">
    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-65963601-5', 'auto');
ga('send', 'pageview');

</script>
    
    


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4635625843749103",
        enable_page_level_ads: true
    });
    </script>
</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" id="bm"></a>
                        <div style="padding: 38px 0px; font-size: 14px; letter-spacing: 0.3px;"> 필오의 개발 docs &#10024;&#9994;</div> 
                    </h1>
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm-128583/">Algorithm &#128583;</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm-128583/Level2/">Level2</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm-128583/Level3/">Level3</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Project-127939/">Project &#127939;</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Project-127939/DA-DA/">DA, DA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Project-127939/Univ-Project/">Univ Project</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/">TIL &#9997;</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/Angular/">Angular</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/CS/">CS</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/CSS/">CSS</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/CleanCode/">CleanCode</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/Database/">Database</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/Javascript/">Javascript</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/Jquery/">Jquery</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/React/">React</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/TDD/">TDD</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/Typescript/">Typescript</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/Web/">Web</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/TIL-9997/log/">log</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/blog/">blog</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/blog/hexo/">hexo</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/blog/style/">style</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="https://www.linkedin.com/in/feel5ny/">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/TIL-9997/">TIL &#9997;</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/TIL-9997/Javascript/">Javascript</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- firstAd -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4635625843749103"
     data-ad-slot="6920417216"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
                            <article id="post-JS_13" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        13/ Image 업로드 시 회전에 대하여 (feat. exif 메타데이터 - Orientation)
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2018/08/06/JS_13/" class="article-date">
            <time datetime="2018-08-06T12:20:19.000Z" itemprop="datePublished">2018-08-06</time>
        </a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/EXIF/">EXIF</a>, <a class="tag-link" href="/tags/File-API/">File API</a>, <a class="tag-link" href="/tags/javascript/">javascript</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>웹 브라우저에서 이미지를 업로드 할 때 type이 file인 input을 통해 이미지를 받고, file API를 사용하여 이미지를 read합니다. 이때 핸드폰을 세워서 촬영할 경우 사진 이미지가 멋대로 회전되서 read될때가 있습니다. 이를 잡기 위해서는 사진의 메타정보(exif)에 있는 orientation이라는 정보를 확인해야합니다.<br>exif가 무엇인지 간략하게 알아보고, 라이브러리를 사용하여 회전 버그를 픽스하는 방법에 대해서 정리해보았습니다.</p>
<hr>
<p>목차 </p>
<ol>
<li>exif란? <a href="https://ko.wikipedia.org/wiki/%EA%B5%90%ED%99%98_%EC%9D%B4%EB%AF%B8%EC%A7%80_%ED%8C%8C%EC%9D%BC_%ED%98%95%EC%8B%9D" target="_blank" rel="noopener">출처</a></li>
<li>Javascript 로드 시 회전 픽스방법</li>
</ol>
<hr>
<h2 id="1-exif란"><a href="#1-exif란" class="headerlink" title="1. exif란?"></a>1. exif란?</h2><h3 id="교환-이미지-파일-형식-Exif-EXchangable-Image-File-format"><a href="#교환-이미지-파일-형식-Exif-EXchangable-Image-File-format" class="headerlink" title="교환 이미지 파일 형식 (Exif; EXchangable Image File format)"></a><strong>교환 이미지 파일 형식</strong> (Exif; EXchangable Image File format)</h3><p>디지털 카메라에서 이용되는 이미지 파일 포맷이다.<br>이 데이터는 JPEG, TIFF 6.0과 RIFF, WAV 파일 포맷에서 이용되며<br><strong><code>사진에 대한 정보를 포함하는 메타데이터</code></strong>를 추가한다.<br>Exif는 JPEG 2000, PNG나 GIF파일에서는 지원하지 않는다.</p>
<h3 id="EXIF의-메타데이터"><a href="#EXIF의-메타데이터" class="headerlink" title="EXIF의 메타데이터"></a>EXIF의 메타데이터</h3><p>EXIF 메타데이터는 다음 정보를 포함한다.</p>
<ul>
<li>날짜와 시간 정보</li>
<li>카메라 설정</li>
<li>저작권 정보에 대한 설명</li>
</ul>
<h3 id="지리정보-기록"><a href="#지리정보-기록" class="headerlink" title="지리정보 기록"></a>지리정보 기록</h3><p>교환 이미지 파일 형식은 <code>위치 정보</code>를 기록하는 <strong>표준</strong>을 갖고 있다.<br>기존에는 GPS 수신기를 내장한 극소수의 카메라만이 사진이 찍힌 장소의 정보를 저장할 수 있었다.<br>니콘 D300이나 니콘 D90, 파인픽스 S5 Pro, (캐논 EOS 6D 는 내부 장착)는 카메라 플래시 연결부에 별도의 GPS 수신기를 장착하여 지리 정보를 기록할 수 있다. 기록된 GPS 데이터는 컴퓨터에서 다른 디지털 사진에도 추가될 수 있다.</p>
<p><strong>그러나 최근에는 GPS 수신기를 장착하고 사진 촬영이 가능한 수많은 휴대폰과 태블릿PC 등이 있어<br>해당 기기로 사진 촬영을 할 경우 위치 정보를 같이 저장할 수 있는 옵션을 지원하여 위치 정보를 함께 기록하여 촬영하기 쉬워졌다.</strong></p>
<h3 id="Exif-이미지-정보"><a href="#Exif-이미지-정보" class="headerlink" title="Exif : 이미지 정보"></a>Exif : 이미지 정보</h3><p>Exif 데이터는 이미지 파일 자체에 끼워진다.<br>많은 그래픽 소프트웨어에서 Exif 데이터를 인식하고,<br>파일이 변경될 때에도 메타데이터를 보존한다.<br>단 구버전의 경우에는 해당되지 않는다.<br>많은 이미지 갤러리 프로그램 역시 Exif 데이터를 인식하고, 이미지 옆에 Exif 정보를 보여 준다.</p>
<p>Exif 메타데이터는 </p>
<ul>
<li>카메라 제조사 </li>
<li>카메라 모델</li>
<li><strong>회전 방향</strong></li>
<li>날짜와 시간 </li>
<li>색 공간</li>
<li>초점 거리 </li>
<li>플래시</li>
<li>ISO 속도</li>
<li>조리개</li>
<li>셔터 속도</li>
<li>gps<br>등의 정보를 제공한다.</li>
</ul>
<blockquote>
<p>포토샵이나 라이트룸에서 사진을 import한 후 info를 확인하면 사진 정보를 바로 확인할 수 있는데, 이 사진이 갖고 있는 exif데이터로 확인하는 듯 </p>
</blockquote>
<p><img src="/images/2018/22/Konqueror_Exif_data.jpg"></p>
<hr>
<hr>
<h2 id="2-Javascript-로드-시-회전-픽스방법"><a href="#2-Javascript-로드-시-회전-픽스방법" class="headerlink" title="2. Javascript 로드 시 회전 픽스방법"></a>2. Javascript 로드 시 회전 픽스방법</h2><p>전체 flow는 이렇습니다.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> input file에서 image upload</span><br><span class="line"><span class="number">2.</span> File API중 FileReader를 사용하여 file의 data 확인</span><br><span class="line"><span class="number">3.</span> reader.onload 에서 Image 인스턴스 생성</span><br><span class="line"><span class="number">4.</span> read의 result값 == binary 데이터</span><br><span class="line"><span class="number">5.</span> img src에 result값 삽입</span><br><span class="line"><span class="number">6.</span> binary 데이터에서 orientation 관련 태그값 select =&gt; orientation 값 추출</span><br><span class="line"><span class="number">7.</span> orientation 값에 따라 img 회전 </span><br><span class="line"><span class="number">8.</span> canvas 생성, img를 canvas에서 다시 그림 (drawImage)</span><br><span class="line"><span class="number">9.</span> 해당 canvas의 toDataURL를 사용하여 dataUrl추출</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h3 id="exif-중-orientation-값"><a href="#exif-중-orientation-값" class="headerlink" title="exif 중 - orientation 값"></a>exif 중 - orientation 값</h3><p><img src="/images/2018/22/orientation.gif"><br>fileList =&gt; file =&gt; binary Data =&gt; exif의 주소값을 찾아서 사진 정보를 get해오기<br>(exif라는 라이브러리를 들춰보면 재밌는 것이!!많습니다.)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// Tiff : Tagged Image File Format</span></span><br><span class="line"><span class="keyword">var</span> TiffTags = EXIF.TiffTags = &#123;</span><br><span class="line">      <span class="number">0x0100</span> : <span class="string">"ImageWidth"</span>,</span><br><span class="line">      <span class="number">0x0101</span> : <span class="string">"ImageHeight"</span>,</span><br><span class="line">      <span class="number">0x8769</span> : <span class="string">"ExifIFDPointer"</span>,</span><br><span class="line">      <span class="number">0x8825</span> : <span class="string">"GPSInfoIFDPointer"</span>,</span><br><span class="line">      <span class="number">0xA005</span> : <span class="string">"InteroperabilityIFDPointer"</span>,</span><br><span class="line">      <span class="number">0x0102</span> : <span class="string">"BitsPerSample"</span>,</span><br><span class="line">      <span class="number">0x0103</span> : <span class="string">"Compression"</span>,</span><br><span class="line">      <span class="number">0x0106</span> : <span class="string">"PhotometricInterpretation"</span>,</span><br><span class="line">      <span class="number">0x0112</span> : <span class="string">"Orientation"</span>, &lt;==</span><br><span class="line">      <span class="number">0x0115</span> : <span class="string">"SamplesPerPixel"</span>,</span><br><span class="line">      <span class="number">0x011C</span> : <span class="string">"PlanarConfiguration"</span>,</span><br><span class="line">      <span class="number">0x0212</span> : <span class="string">"YCbCrSubSampling"</span>,</span><br><span class="line">      <span class="number">0x0213</span> : <span class="string">"YCbCrPositioning"</span>,</span><br><span class="line">      <span class="number">0x011A</span> : <span class="string">"XResolution"</span>,</span><br><span class="line">      <span class="number">0x011B</span> : <span class="string">"YResolution"</span>,</span><br><span class="line">      <span class="number">0x0128</span> : <span class="string">"ResolutionUnit"</span>,</span><br><span class="line">      <span class="number">0x0111</span> : <span class="string">"StripOffsets"</span>,</span><br><span class="line">      <span class="number">0x0116</span> : <span class="string">"RowsPerStrip"</span>,</span><br><span class="line">      <span class="number">0x0117</span> : <span class="string">"StripByteCounts"</span>,</span><br><span class="line">      <span class="number">0x0201</span> : <span class="string">"JPEGInterchangeFormat"</span>,</span><br><span class="line">      <span class="number">0x0202</span> : <span class="string">"JPEGInterchangeFormatLength"</span>,</span><br><span class="line">      <span class="number">0x012D</span> : <span class="string">"TransferFunction"</span>,</span><br><span class="line">      <span class="number">0x013E</span> : <span class="string">"WhitePoint"</span>,</span><br><span class="line">      <span class="number">0x013F</span> : <span class="string">"PrimaryChromaticities"</span>,</span><br><span class="line">      <span class="number">0x0211</span> : <span class="string">"YCbCrCoefficients"</span>,</span><br><span class="line">      <span class="number">0x0214</span> : <span class="string">"ReferenceBlackWhite"</span>,</span><br><span class="line">      <span class="number">0x0132</span> : <span class="string">"DateTime"</span>,</span><br><span class="line">      <span class="number">0x010E</span> : <span class="string">"ImageDescription"</span>,</span><br><span class="line">      <span class="number">0x010F</span> : <span class="string">"Make"</span>,</span><br><span class="line">      <span class="number">0x0110</span> : <span class="string">"Model"</span>,</span><br><span class="line">      <span class="number">0x0131</span> : <span class="string">"Software"</span>,</span><br><span class="line">      <span class="number">0x013B</span> : <span class="string">"Artist"</span>,</span><br><span class="line">      <span class="number">0x8298</span> : <span class="string">"Copyright"</span></span><br><span class="line">  &#125;;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>번거로운 작업이기 때문에.. 아래 라이브러리를 사용합니다.</p>
<ul>
<li><a href="https://github.com/blueimp/JavaScript-Load-Image" target="_blank" rel="noopener">load-image-orientation.js</a></li>
<li><a href="https://github.com/exif-js/exif-js" target="_blank" rel="noopener">exif.js</a></li>
</ul>
<p>개인적으로는 <code>load-image-orientation</code>가 좋습니다 :)<br>orientation값에 따른 회전 이외에도 crop기능도 있습니다. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// load-image-orientation.js</span></span><br><span class="line"><span class="keyword">switch</span> (orientation) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="comment">// horizontal flip</span></span><br><span class="line">    ctx.translate(width, <span class="number">0</span>)</span><br><span class="line">    ctx.scale(<span class="number">-1</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="comment">// 180° rotate left</span></span><br><span class="line">    ctx.translate(width, height)</span><br><span class="line">    ctx.rotate(<span class="built_in">Math</span>.PI)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    <span class="comment">// vertical flip</span></span><br><span class="line">    ctx.translate(<span class="number">0</span>, height)</span><br><span class="line">    ctx.scale(<span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    <span class="comment">// vertical flip + 90 rotate right</span></span><br><span class="line">    ctx.rotate(<span class="number">0.5</span> * <span class="built_in">Math</span>.PI)</span><br><span class="line">    ctx.scale(<span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">    <span class="comment">// 90° rotate right</span></span><br><span class="line">    ctx.rotate(<span class="number">0.5</span> * <span class="built_in">Math</span>.PI)</span><br><span class="line">    ctx.translate(<span class="number">0</span>, -height)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">    <span class="comment">// horizontal flip + 90 rotate right</span></span><br><span class="line">    ctx.rotate(<span class="number">0.5</span> * <span class="built_in">Math</span>.PI)</span><br><span class="line">    ctx.translate(width, -height)</span><br><span class="line">    ctx.scale(<span class="number">-1</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">    <span class="comment">// 90° rotate left</span></span><br><span class="line">    ctx.rotate(<span class="number">-0.5</span> * <span class="built_in">Math</span>.PI)</span><br><span class="line">    ctx.translate(-width, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>라이브러리 내부를 보시면, orientation 값에 따라 image를 회전하는 것을 볼 수 있습니다.</p>
<p>이미지 resizing 함수도 따로 작업했었는데, 이번 이슈를 통해서 찾은 load-image 라이브러리에 리사이징관련된 메서드들도 있는 것을 확인했습니다. </p>
<hr>
<h3 id="참고링크"><a href="#참고링크" class="headerlink" title="참고링크"></a>참고링크</h3><ol>
<li><a href="https://ko.wikipedia.org/wiki/%EA%B5%90%ED%99%98_%EC%9D%B4%EB%AF%B8%EC%A7%80_%ED%8C%8C%EC%9D%BC_%ED%98%95%EC%8B%9D" target="_blank" rel="noopener">https://ko.wikipedia.org/wiki/%EA%B5%90%ED%99%98_%EC%9D%B4%EB%AF%B8%EC%A7%80_%ED%8C%8C%EC%9D%BC_%ED%98%95%EC%8B%9D</a></li>
<li><a href="https://magnushoff.com/jpeg-orientation.html" target="_blank" rel="noopener">https://magnushoff.com/jpeg-orientation.html</a></li>
<li><a href="http://code.flickr.net/2012/06/01/parsing-exif-client-side-using-javascript-2/" target="_blank" rel="noopener">http://code.flickr.net/2012/06/01/parsing-exif-client-side-using-javascript-2/</a></li>
</ol>

        </div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- firstAd -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4635625843749103"
     data-ad-slot="6920417216"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <footer class="article-footer">
            



    <a data-url="http://feel5ny.github.io/2018/08/06/JS_13/" data-id="cjkmi36uf0019w5bmdkdti6h3" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>


                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://wwww.facebook.com/feel5ny" target="_blank">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/feel5ny" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/feed.xml" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
            <li>
                <a class="social-tooltip" title="brunch" href="https://brunch.co.kr/@feel5ny" target="_blank">
                    <img src="/images/brunch_logo.png" alt="브런치 로고" width="15px">
                </a>
            </li>
        </ul>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2018/08/03/Clean_code_3/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">책 리뷰/ 읽기 좋은 코드가 좋은 코드다. - part3. 코드 재작성하기</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/06/JS_13/" class="thumbnail">
    
    
        <span style="background-image:url(/images/2018/22/thumb_default.jpg)" alt="13/ Image 업로드 시 회전에 대하여 (feat. exif 메타데이터 - Orientation)" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TIL-9997/">TIL &#9997;</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/TIL-9997/Javascript/">Javascript</a></p>
                            <p class="item-title"><a href="/2018/08/06/JS_13/" class="title">13/ Image 업로드 시 회전에 대하여 (feat. exif 메타데이터 - Orientation)</a></p>
                            <p class="item-date"><time datetime="2018-08-06T12:20:19.000Z" itemprop="datePublished">2018-08-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/03/Clean_code_3/" class="thumbnail">
    
    
        <span style="background-image:url(/images/2018/21/thumb_default.jpg)" alt="책 리뷰/ 읽기 좋은 코드가 좋은 코드다. - part3. 코드 재작성하기" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TIL-9997/">TIL &#9997;</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/TIL-9997/CleanCode/">CleanCode</a></p>
                            <p class="item-title"><a href="/2018/08/03/Clean_code_3/" class="title">책 리뷰/ 읽기 좋은 코드가 좋은 코드다. - part3. 코드 재작성하기</a></p>
                            <p class="item-date"><time datetime="2018-08-03T11:12:34.000Z" itemprop="datePublished">2018-08-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/02/Clean_code_2/" class="thumbnail">
    
    
        <span style="background-image:url(/images/2018/20/thumb_default.jpg)" alt="책 리뷰/ 읽기 좋은 코드가 좋은 코드다. - part2. 루프와 논리를 단순화하기" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TIL-9997/">TIL &#9997;</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/TIL-9997/CleanCode/">CleanCode</a></p>
                            <p class="item-title"><a href="/2018/08/02/Clean_code_2/" class="title">책 리뷰/ 읽기 좋은 코드가 좋은 코드다. - part2. 루프와 논리를 단순화하기</a></p>
                            <p class="item-date"><time datetime="2018-08-02T11:12:34.000Z" itemprop="datePublished">2018-08-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/01/Clean_code_1/" class="thumbnail">
    
    
        <span style="background-image:url(/images/2018/19/thumb_default.jpg)" alt="책 리뷰/ 읽기 좋은 코드가 좋은 코드다. - part1. 표면적 수준에서의 개선" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TIL-9997/">TIL &#9997;</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/TIL-9997/CleanCode/">CleanCode</a></p>
                            <p class="item-title"><a href="/2018/08/01/Clean_code_1/" class="title">책 리뷰/ 읽기 좋은 코드가 좋은 코드다. - part1. 표면적 수준에서의 개선</a></p>
                            <p class="item-date"><time datetime="2018-08-01T11:12:34.000Z" itemprop="datePublished">2018-08-01</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/06/07/rendering_engine_2/" class="thumbnail">
    
    
        <span style="background-image:url(/images/2018/15/thumb_default.jpg)" alt="렌더링 엔진(2) - 렌더 트리 구축" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TIL-9997/">TIL &#9997;</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/TIL-9997/Web/">Web</a></p>
                            <p class="item-title"><a href="/2018/06/07/rendering_engine_2/" class="title">렌더링 엔진(2) - 렌더 트리 구축</a></p>
                            <p class="item-date"><time datetime="2018-06-07T12:20:19.000Z" itemprop="datePublished">2018-06-07</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm-128583/">Algorithm &#128583;</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm-128583/Level2/">Level2</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm-128583/Level3/">Level3</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Project-127939/">Project &#127939;</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Project-127939/DA-DA/">DA, DA</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Project-127939/Univ-Project/">Univ Project</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/">TIL &#9997;</a><span class="category-list-count">56</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/Angular/">Angular</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/CS/">CS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/CSS/">CSS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/CleanCode/">CleanCode</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/Database/">Database</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/Javascript/">Javascript</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/Jquery/">Jquery</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/React/">React</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/TDD/">TDD</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/Typescript/">Typescript</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/Web/">Web</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TIL-9997/log/">log</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/blog/hexo/">hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/style/">style</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/CS/" style="font-size: 15.71px;">CS</a> <a href="/tags/DADA/" style="font-size: 10px;">DADA</a> <a href="/tags/EXIF/" style="font-size: 10px;">EXIF</a> <a href="/tags/File-API/" style="font-size: 11.43px;">File API</a> <a href="/tags/TDD/" style="font-size: 11.43px;">TDD</a> <a href="/tags/Web/" style="font-size: 12.86px;">Web</a> <a href="/tags/algorithm/" style="font-size: 11.43px;">algorithm</a> <a href="/tags/angular/" style="font-size: 12.86px;">angular</a> <a href="/tags/bodymovin/" style="font-size: 10px;">bodymovin</a> <a href="/tags/browser/" style="font-size: 12.86px;">browser</a> <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/cleanCode/" style="font-size: 12.86px;">cleanCode</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/database/" style="font-size: 11.43px;">database</a> <a href="/tags/db/" style="font-size: 10px;">db</a> <a href="/tags/design/" style="font-size: 10px;">design</a> <a href="/tags/firebase/" style="font-size: 10px;">firebase</a> <a href="/tags/formatter/" style="font-size: 11.43px;">formatter</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/lottie/" style="font-size: 10px;">lottie</a> <a href="/tags/media-query/" style="font-size: 10px;">media-query</a> <a href="/tags/mobile/" style="font-size: 10px;">mobile</a> <a href="/tags/mocha/" style="font-size: 10px;">mocha</a> <a href="/tags/network/" style="font-size: 14.29px;">network</a> <a href="/tags/node-js/" style="font-size: 10px;">node.js</a> <a href="/tags/plan/" style="font-size: 10px;">plan</a> <a href="/tags/prettier/" style="font-size: 11.43px;">prettier</a> <a href="/tags/prototype/" style="font-size: 10px;">prototype</a> <a href="/tags/publishing/" style="font-size: 10px;">publishing</a> <a href="/tags/react/" style="font-size: 17.14px;">react</a> <a href="/tags/refactoring/" style="font-size: 14.29px;">refactoring</a> <a href="/tags/typescript/" style="font-size: 18.57px;">typescript</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://dada.downmix.net">DA,DA</a>
                    </li>
                
                    <li>
                        <a href="http://feel5ny.me">Naver blog</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- firstAd -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4635625843749103"
     data-ad-slot="6920417216"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                
                <p>&copy; 2018 clara Kim</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'feel5ny';
    
    
    var disqus_url = 'http://feel5ny.github.io/2018/08/06/JS_13/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>
<script src="/js/lottie.js"></script>
<script src="/js/lottie_index.js"></script>
<script src="/js/logo_ny.json"></script>

    </div>
</body>
</html>
